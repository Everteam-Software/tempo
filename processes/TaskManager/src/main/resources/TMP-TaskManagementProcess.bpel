<?xml version="1.0" encoding="UTF-8"?>
<bpel:process xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:vprop="http://docs.oasis-open.org/wsbpel/2.0/varprop" xmlns:pnlk="http://docs.oasis-open.org/wsbpel/2.0/plnktype" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ode="http://www.apache.org/ode/type/extension" xmlns:xml="http://www.w3.org/XML/1998/namespace" xmlns:b4p="http://www.intalio.com/bpms/workflow/ib4p_20051115" xmlns:PreviousProcessTaskManager="http://example.com/TMP/PreviousProcessTaskManager" xmlns:UIFW="http://example.com/TMP/UIFW" xmlns:diag="http://example.com/TMP" xmlns:b4px="java:org.intalio.tempo.workflow.processes.xpath.UID" xmlns:UserBusinessProcess="http://example.com/TMP/UserBusinessProcess" xmlns:NextTaskManager="http://example.com/TMP/NextTaskManager" xmlns:this="http://example.com/TMP/TaskManagementProcess" xmlns:tns="http://www.intalio.com/BPMS/Workflow/TaskManagementServices-20051109/" xmlns:UserBusinessProcess1="http://www.intalio.com/bpms/ubp" xmlns:TaskManagementSystem="http://example.com/TMP/TaskManagementSystem" xmlns:bpmn="http://www.intalio.com/bpms" xmlns:atomic="http://ode.apache.org/atomicScope" queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0" bpmn:label="TaskManagementProcess" name="TaskManagementProcess" bpmn:id="_opUVQKdvEdyId4P63ChZuw" targetNamespace="http://example.com/TMP/TaskManagementProcess">
  <bpel:import namespace="http://example.com/TMP/TaskManagementProcess" location="TMP-TaskManagementProcess.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://example.com/TMP" location="TMP.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://www.intalio.com/BPMS/Workflow/TaskManagementServices-20051109/" location="TaskManagementSystem.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://www.intalio.com/bpms/ubp" location="UserBusinessProcess.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://www.intalio.com/bpms/workflow/ib4p_20051115" location="TaskManagerProcess.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:partnerLinks>
    <bpel:partnerLink name="tMPAndUBPPlkVar" partnerLinkType="diag:TMPAndUBP" initializePartnerRole="yes" myRole="TaskManagementProcess_for_UserBusinessProcessForUserBusinessProcessPort" partnerRole="UserBusinessProcess_for_TaskManagementProcessForUserProcessPort"/>
    <bpel:partnerLink name="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" partnerLinkType="diag:TaskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlk" initializePartnerRole="yes" partnerRole="TaskManagementSystem_for_TaskManagementProcess"/>
    <bpel:partnerLink name="taskManagementProcessAndPreviousProcessTaskManagerForTMPPortPlkVar" partnerLinkType="diag:TaskManagementProcessAndPreviousProcessTaskManagerForTMPPortPlk" initializePartnerRole="yes" partnerRole="PreviousProcessTaskManager_for_TaskManagementProcess"/>
    <bpel:partnerLink name="taskManagementProcessAndUIFWForUIFWPortPlkVar" partnerLinkType="diag:TaskManagementProcessAndUIFWForUIFWPortPlk" myRole="TaskManagementProcess_for_UIFW"/>
    <bpel:partnerLink name="taskManagementProcessAndNextTaskManagerForTMPPortPlkVar" partnerLinkType="diag:TaskManagementProcessAndNextTaskManagerForTMPPortPlk" myRole="TaskManagementProcess_for_NextTaskManager"/>
  </bpel:partnerLinks>
  <bpel:correlationSets>
    <bpel:correlationSet name="task" properties="this:taskId"/>
  </bpel:correlationSets>
  <bpel:variables>
    <bpel:variable name="createTMSTaskRequest" messageType="tns:createRequest"/>
    <bpel:variable name="createTMSTaskResponse" messageType="tns:okResponse"/>
    <bpel:variable name="taskCompleted" type="xs:boolean"/>
    <bpel:variable name="taskClaimed" type="xs:boolean"/>
    <bpel:variable name="taskEscalated" type="xs:boolean"/>
    <bpel:variable name="createTaskRequest" messageType="b4p:createTaskRequest"/>
    <bpel:variable name="createTaskResponse" messageType="b4p:createTaskResponse"/>
    <bpel:variable name="initialOwners" type="tns:owners"/>
    <bpel:variable name="b4pNextTaskReadyMsg" messageType="b4p:nextTaskReady"/>
  </bpel:variables>
  <bpel:sequence>
    <bpel:receive partnerLink="tMPAndUBPPlkVar" portType="b4p:UserBusinessProcessPortType" operation="createTask" variable="createTaskRequest" createInstance="yes" bpmn:label="Create Task" name="Create_Task" bpmn:id="_kh8I0KdyEdyId4P63ChZuw"></bpel:receive>
    <bpel:assign name="init-variables-TaskManagementProcess">
      <bpel:copy bpmn:label="$createTMSTaskRequest">
        <bpel:from>
          <bpel:literal><tns:createRequest>
    <tns:task>
        <tns:metadata>
            <tns:taskId></tns:taskId>
            <tns:taskType></tns:taskType>
            <tns:description></tns:description>
            <tns:processId></tns:processId>
            <tns:creationDate></tns:creationDate>
            <tns:userOwner></tns:userOwner>
            <tns:roleOwner></tns:roleOwner>
            <tns:deadline></tns:deadline>
            <tns:priority></tns:priority>
            <tns:claimAction></tns:claimAction>
            <tns:revokeAction></tns:revokeAction>
            <tns:saveAction></tns:saveAction>
            <tns:completeAction></tns:completeAction>
            <tns:formUrl></tns:formUrl>
            <tns:userProcessCompleteSOAPAction></tns:userProcessCompleteSOAPAction>
            <tns:userProcessEndpoint></tns:userProcessEndpoint>
            <tns:userProcessNamespaceURI></tns:userProcessNamespaceURI>
            <tns:attachments></tns:attachments>
        </tns:metadata>
        <tns:input/>
    </tns:task>
    <tns:participantToken></tns:participantToken>
</tns:createRequest></bpel:literal>
        </bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest</bpel:to>
      </bpel:copy>
      <bpel:copy bpmn:label="$taskCompleted">
        <bpel:from>
          <bpel:literal>false</bpel:literal>
        </bpel:from>
        <bpel:to>$taskCompleted</bpel:to>
      </bpel:copy>
      <bpel:copy bpmn:label="$taskClaimed">
        <bpel:from>
          <bpel:literal>false</bpel:literal>
        </bpel:from>
        <bpel:to>$taskClaimed</bpel:to>
      </bpel:copy>
      <bpel:copy bpmn:label="$taskEscalated">
        <bpel:from>
          <bpel:literal>false</bpel:literal>
        </bpel:from>
        <bpel:to>$taskEscalated</bpel:to>
      </bpel:copy>
      <bpel:copy bpmn:label="$createTaskResponse">
        <bpel:from>
          <bpel:literal>
<b4p:response>
  <b4p:taskMetaData>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
  </b4p:taskMetaData>
  <b4p:status></b4p:status>
  <b4p:errorCode></b4p:errorCode>
  <b4p:errorReason></b4p:errorReason>
  <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
        </bpel:from>
        <bpel:to>$createTaskResponse.root</bpel:to>
      </bpel:copy>
      <bpel:copy bpmn:label="$initialOwners">
        <bpel:from>
          <bpel:literal>
<typeWrapper>
  <tns:userOwner></tns:userOwner>
  <tns:roleOwner></tns:roleOwner>
</typeWrapper></bpel:literal>
        </bpel:from>
        <bpel:to>$initialOwners</bpel:to>
      </bpel:copy>
      <bpel:copy bpmn:label="$b4pNextTaskReadyMsg">
        <bpel:from>
          <bpel:literal>
<b4p:chainedExecution>
  <b4p:previousTaskId></b4p:previousTaskId>
  <b4p:nextTaskId></b4p:nextTaskId>
  <b4p:nextTaskURL></b4p:nextTaskURL>
</b4p:chainedExecution></bpel:literal>
        </bpel:from>
        <bpel:to>$b4pNextTaskReadyMsg.root</bpel:to>
      </bpel:copy>
    </bpel:assign>
    <bpel:assign bpmn:label="Create Task" name="Create_Task-1" bpmn:id="_kh8I0KdyEdyId4P63ChZuw">
      <bpel:copy>
        <bpel:from>concat(b4px:create(), $ode:pid)</bpel:from>
        <bpel:to>$createTaskResponse.root/b4p:taskMetaData/b4p:taskId</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:formUrl</bpel:from>
        <bpel:to>$createTaskResponse.root/b4p:taskMetaData/b4p:formUrl</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:processId</bpel:from>
        <bpel:to>$createTaskResponse.root/b4p:taskMetaData/b4p:processId</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>if (boolean(normalize-space($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:until))) then ($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:until) else (if (boolean(normalize-space($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:for))) then ((current-dateTime() + xs:yearMonthDuration(xs:duration($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:for))) + xs:dayTimeDuration(xs:duration($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:for))) else (current-dateTime()))</bpel:from>
        <bpel:to>$createTaskResponse.root/b4p:taskMetaData/b4p:creationDate</bpel:to>
      </bpel:copy>
    </bpel:assign>
    <bpel:reply partnerLink="tMPAndUBPPlkVar" portType="b4p:UserBusinessProcessPortType" operation="createTask" variable="createTaskResponse" bpmn:label="Create Task" name="Create_Task-2" bpmn:id="_kh8I0KdyEdyId4P63ChZuw">
      <bpel:correlations>
        <bpel:correlation set="task" initiate="yes"/>
      </bpel:correlations>
    </bpel:reply>
    <bpel:if>
      <bpel:condition>boolean(normalize-space($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:until))</bpel:condition>
      <bpel:sequence>
        <bpel:wait bpmn:label="defer Activation until a date" name="defer_Activation_until_a_date" bpmn:id="_OjQXsLD5Edy6MtvbqSLrQw">
          <bpel:until>$createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:until</bpel:until>
        </bpel:wait>
      </bpel:sequence>
      <bpel:elseif>
        <bpel:condition>boolean(normalize-space($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:for))</bpel:condition>
        <bpel:sequence>
          <bpel:wait bpmn:label="defer activation for a duration" name="defer_activation_for_a_duration" bpmn:id="_R9Y8QLD5Edy6MtvbqSLrQw">
            <bpel:for>$createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:for</bpel:for>
          </bpel:wait>
        </bpel:sequence>
      </bpel:elseif>
    </bpel:if>
    <bpel:assign bpmn:label="Prepare creation Task in Database" name="Prepare_creation_Task_in_Database" bpmn:id="_Yppk0Kd1EdyId4P63ChZuw">
      <bpel:copy>
        <bpel:from>"activity"</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:taskType</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>$createTaskResponse.root/b4p:taskMetaData/b4p:taskId</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:taskId</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:description</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:description</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:processId</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:processId</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>bpel:doXslTransform("userRoleOwner.xsl", $createTMSTaskRequest.createRequest, "metadata", $createTaskRequest.root/b4p:taskMetaData)</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest</bpel:to>
      </bpel:copy>
    </bpel:assign>
    <bpel:if>
      <bpel:condition>boolean(normalize-space($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:expiration/b4p:until))</bpel:condition>
      <bpel:sequence>
        <bpel:assign bpmn:label="Calculate deadline if date is specified" name="Calculate_deadline_if_date_is_specified" bpmn:id="_T6VwQMMEEdyCWZdoTEFyaQ">
          <bpel:copy>
            <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:expiration/b4p:until</bpel:from>
            <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:deadline</bpel:to>
          </bpel:copy>
        </bpel:assign>
      </bpel:sequence>
      <bpel:elseif>
        <bpel:condition>boolean(normalize-space($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:expiration/b4p:for))</bpel:condition>
        <bpel:sequence>
          <bpel:assign bpmn:label="Calculate deadline if duration  is specified" name="Calculate_deadline_if_duration__is_specified" bpmn:id="_WRDI8MMEEdyCWZdoTEFyaQ">
            <bpel:copy>
              <bpel:from>(current-dateTime() + xs:dayTimeDuration(xs:duration($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:expiration/b4p:for))) + xs:yearMonthDuration(xs:duration($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:expiration/b4p:for))</bpel:from>
              <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:deadline</bpel:to>
            </bpel:copy>
          </bpel:assign>
        </bpel:sequence>
      </bpel:elseif>
    </bpel:if>
    <bpel:scope bpmn:label="SubProcess" name="SubProcess" bpmn:id="_qCKssG7fEd2I0ZzPPBs2Wg">
      <bpel:faultHandlers>
        <bpel:catchAll>
          <bpel:empty bpmn:label="Empty_End_Event" name="Empty_End_Event" bpmn:id="_uIRmcG7fEd2I0ZzPPBs2Wg"/>
        </bpel:catchAll>
      </bpel:faultHandlers>
      <bpel:sequence>
        <bpel:assign bpmn:label="Pass Attachments" name="Pass_Attachments" bpmn:id="_qC6TkG7fEd2I0ZzPPBs2Wg">
          <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
            <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:attachments</bpel:from>
            <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:attachments</bpel:to>
          </bpel:copy>
        </bpel:assign>
      </bpel:sequence>
    </bpel:scope>
    <bpel:assign bpmn:label="Create Task in Database" name="Create_Task_in_Database" bpmn:id="_jiUMsKgTEdylDI4yblkdQQ">
      <bpel:copy>
        <bpel:from>bpel:doXslTransform("actions.xsl", $createTMSTaskRequest.createRequest, "metadata", $createTaskRequest.root/b4p:taskMetaData)</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:formUrl</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:formUrl</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>$createTaskRequest.root/b4p:taskInput</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:input</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessCompleteSOAPAction</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:userProcessCompleteSOAPAction</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>"activity"</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:taskType</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>if (boolean(normalize-space($createTaskRequest.root/b4p:taskMetaData/b4p:priority))) then ($createTaskRequest.root/b4p:taskMetaData/b4p:priority) else ("")</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:priority</bpel:to>
      </bpel:copy>
      <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:creationDate</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:creationDate</bpel:to>
      </bpel:copy>
    </bpel:assign>
    <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServices" operation="create" inputVariable="createTMSTaskRequest" outputVariable="createTMSTaskResponse" bpmn:label="Create Task in Database" name="Create_Task_in_Database-1" bpmn:id="_jiUMsKgTEdylDI4yblkdQQ"></bpel:invoke>
    <bpel:if>
      <bpel:condition>$createTaskRequest.root/b4p:taskMetaData/b4p:isChainedBefore/text() = "true"</bpel:condition>
      <bpel:sequence>
        <bpel:assign bpmn:label="Notify previous Task Manager" name="Notify_previous_Task_Manager" bpmn:id="_DkaEoKgeEdylDI4yblkdQQ">
          <bpel:copy>
            <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:previousTaskId</bpel:from>
            <bpel:to>$b4pNextTaskReadyMsg.root/b4p:previousTaskId</bpel:to>
          </bpel:copy>
          <bpel:copy>
            <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:formUrl</bpel:from>
            <bpel:to>$b4pNextTaskReadyMsg.root/b4p:nextTaskURL</bpel:to>
          </bpel:copy>
          <bpel:copy>
            <bpel:from>$createTaskResponse.root/b4p:taskMetaData/b4p:taskId</bpel:from>
            <bpel:to>$b4pNextTaskReadyMsg.root/b4p:nextTaskId</bpel:to>
          </bpel:copy>
        </bpel:assign>
        <bpel:invoke partnerLink="taskManagementProcessAndPreviousProcessTaskManagerForTMPPortPlkVar" portType="b4p:TMPPortType" operation="nextTaskReady" inputVariable="b4pNextTaskReadyMsg" bpmn:label="Notify previous Task Manager" name="Notify_previous_Task_Manager-1" bpmn:id="_DkaEoKgeEdylDI4yblkdQQ"></bpel:invoke>
      </bpel:sequence>
    </bpel:if>
    <bpel:scope bpmn:label="SubProcess" name="SubProcess-1" bpmn:id="_TbKiIKhDEdyQFMjeTyvJzg">
      <bpel:variables>
        <bpel:variable name="tnsReassignRequestMsg" messageType="tns:reassignRequest"/>
        <bpel:variable name="tnsReassignResponseMsg" messageType="tns:okResponse"/>
        <bpel:variable name="completeTaskRequest" messageType="b4p:completeTaskRequest"/>
        <bpel:variable name="completeTMSTaskRequest" messageType="tns:setOutputAndCompleteRequest"/>
        <bpel:variable name="completeTMSTaskResponse" messageType="tns:okResponse"/>
        <bpel:variable name="completeTaskResponse" messageType="b4p:completeTaskResponse"/>
        <bpel:variable name="claimTaskRequest" messageType="b4p:claimTaskRequest"/>
        <bpel:variable name="claimTaskResponse" messageType="b4p:claimTaskResponse"/>
        <bpel:variable name="revokeTaskRequest" messageType="b4p:revokeTaskRequest"/>
        <bpel:variable name="revokeTaskResponse" messageType="b4p:revokeTaskResponse"/>
        <bpel:variable name="escalateTaskRequest" messageType="b4p:escalateTaskRequest"/>
        <bpel:variable name="escalateTaskResponse" messageType="b4p:escalateTaskResponse"/>
        <bpel:variable name="notifyTaskCompletionResponse" messageType="UserBusinessProcess1:notifyTaskCompletionResponse"/>
        <bpel:variable name="notifyTaskCompletionRequest" messageType="UserBusinessProcess1:notifyTaskCompletionRequest"/>
        <bpel:variable name="tnsGetAttachmentsRequestMsg" messageType="tns:getAttachmentsRequest"/>
        <bpel:variable name="tnsGetAttachmentsResponseMsg" messageType="tns:getAttachmentsResponse"/>
        <bpel:variable name="TMSskipRequest" messageType="tns:skipRequest"/>
        <bpel:variable name="TMSskipResponse" messageType="tns:okResponse"/>
        <bpel:variable name="b4pSkipTaskRequestMsg" messageType="b4p:skipTaskRequest"/>
        <bpel:variable name="b4pSkipTaskResponseMsg" messageType="b4p:skipTaskResponse"/>
        <bpel:variable name="b4pNextTaskReadyMsg" messageType="b4p:nextTaskReady"/>
      </bpel:variables>
      <bpel:faultHandlers>
        <bpel:catch faultName="this:DeadlineReached">
          <bpel:scope bpmn:label="SubProcess" name="SubProcess-2" bpmn:id="_3Ct-YLEgEdy6MtvbqSLrQw">
            <bpel:variables>
              <bpel:variable name="tnsFailResponseMsg" messageType="tns:okResponse"/>
              <bpel:variable name="tnsFailRequestMsg" messageType="tns:failRequest"/>
              <bpel:variable name="userBusinessProcess1NotifyTaskCompletionResponseMsg" messageType="UserBusinessProcess1:notifyTaskCompletionResponse"/>
              <bpel:variable name="userBusinessProcess1NotifyTaskCompletionRequestMsg" messageType="UserBusinessProcess1:notifyTaskCompletionRequest"/>
            </bpel:variables>
            <bpel:sequence>
              <bpel:assign name="init-variables-SubProcess">
                <bpel:copy bpmn:label="$tnsFailRequestMsg">
                  <bpel:from>
                    <bpel:literal>
<tns:failRequest>
  <tns:taskId></tns:taskId>
  <tns:code></tns:code>
  <tns:message></tns:message>
  <tns:participantToken></tns:participantToken>
</tns:failRequest></bpel:literal>
                  </bpel:from>
                  <bpel:to>$tnsFailRequestMsg.failRequest</bpel:to>
                </bpel:copy>
                <bpel:copy bpmn:label="$userBusinessProcess1NotifyTaskCompletionRequestMsg">
                  <bpel:from>
                    <bpel:literal>
<b4p:notifyTaskCompletionRequest>
  <b4p:taskMetaData>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
  </b4p:taskMetaData>
  <b4p:taskOutput></b4p:taskOutput>
  <b4p:user></b4p:user>
  <b4p:status></b4p:status>
</b4p:notifyTaskCompletionRequest></bpel:literal>
                  </bpel:from>
                  <bpel:to>$userBusinessProcess1NotifyTaskCompletionRequestMsg.root</bpel:to>
                </bpel:copy>
              </bpel:assign>
              <bpel:assign bpmn:label="Notify Process Deadline Reached" name="Notify_Process_Deadline_Reached" bpmn:id="_UM9-sMK_EdyR9_IVnPh8Pg">
                <bpel:copy>
                  <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessCompleteSOAPAction</bpel:from>
                  <bpel:to>$userBusinessProcess1NotifyTaskCompletionRequestMsg.root/b4p:taskMetaData/b4p:userProcessCompleteSOAPAction</bpel:to>
                </bpel:copy>
                <bpel:copy>
                  <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessNamespaceURI</bpel:from>
                  <bpel:to>$userBusinessProcess1NotifyTaskCompletionRequestMsg.root/b4p:taskMetaData/b4p:userProcessNamespaceURI</bpel:to>
                </bpel:copy>
                <bpel:copy>
                  <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessEndpoint</bpel:from>
                  <bpel:to>$userBusinessProcess1NotifyTaskCompletionRequestMsg.root/b4p:taskMetaData/b4p:userProcessEndpoint</bpel:to>
                </bpel:copy>
                <bpel:copy>
                  <bpel:from>"DeadlineReached"</bpel:from>
                  <bpel:to>$userBusinessProcess1NotifyTaskCompletionRequestMsg.root/b4p:status</bpel:to>
                </bpel:copy>
              </bpel:assign>
              <bpel:invoke partnerLink="tMPAndUBPPlkVar" portType="UserBusinessProcess1:userProcessPortType" operation="notifyTaskCompletion" inputVariable="userBusinessProcess1NotifyTaskCompletionRequestMsg" outputVariable="userBusinessProcess1NotifyTaskCompletionResponseMsg" bpmn:label="Notify Process Deadline Reached" name="Notify_Process_Deadline_Reached-1" bpmn:id="_UM9-sMK_EdyR9_IVnPh8Pg"></bpel:invoke>
              <bpel:assign bpmn:label="Change Task status to Failed" name="Change_Task_status_to_Failed" bpmn:id="_FyrywLEhEdy6MtvbqSLrQw">
                <bpel:copy>
                  <bpel:from>$createTaskResponse.root/b4p:taskMetaData/b4p:taskId</bpel:from>
                  <bpel:to>$tnsFailRequestMsg.failRequest/tns:taskId</bpel:to>
                </bpel:copy>
              </bpel:assign>
              <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServices" operation="fail" inputVariable="tnsFailRequestMsg" outputVariable="tnsFailResponseMsg" bpmn:label="Change Task status to Failed" name="Change_Task_status_to_Failed-1" bpmn:id="_FyrywLEhEdy6MtvbqSLrQw"></bpel:invoke>
            </bpel:sequence>
          </bpel:scope>
        </bpel:catch>
      </bpel:faultHandlers>
      <bpel:eventHandlers>
        <bpel:onAlarm>
          <bpel:until>if (boolean(normalize-space($createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:deadline))) then ($createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:deadline) else (current-dateTime())</bpel:until>
          <bpel:if>
            <bpel:condition>boolean(normalize-space($createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:deadline))</bpel:condition>
            <bpel:sequence>
              <bpel:throw faultName="this:DeadlineReached"/>
            </bpel:sequence>
            <bpel:else>
              <bpel:sequence>
                <bpel:empty bpmn:label="No deadline &#13;&#10;is specified" name="No_deadline___is_specified" bpmn:id="_i_UPIMUkEdyOLLhtllRYzQ"/>
              </bpel:sequence>
            </bpel:else>
          </bpel:if>
        </bpel:onAlarm>
      </bpel:eventHandlers>
      <bpel:while bpmn:label="SubProcess" name="SubProcess-3">
        <bpel:condition>not($taskCompleted)</bpel:condition>
        <bpel:sequence>
          <bpel:assign name="init-variables-SubProcess">
            <bpel:copy bpmn:label="$tnsReassignRequestMsg">
              <bpel:from>
                <bpel:literal>
<tns:reassignRequest>
  <tns:taskId></tns:taskId>
  <tns:userOwner></tns:userOwner>
  <tns:roleOwner></tns:roleOwner>
  <tns:taskState></tns:taskState>
  <tns:participantToken></tns:participantToken>
</tns:reassignRequest></bpel:literal>
              </bpel:from>
              <bpel:to>$tnsReassignRequestMsg.reassignRequest</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$completeTMSTaskRequest">
              <bpel:from>
                <bpel:literal>
<tns:setOutputAndCompleteRequest>
  <tns:taskId></tns:taskId>
  <tns:data></tns:data>
  <tns:participantToken></tns:participantToken>
</tns:setOutputAndCompleteRequest></bpel:literal>
              </bpel:from>
              <bpel:to>$completeTMSTaskRequest.setOutputAndCompleteRequest</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$completeTaskResponse">
              <bpel:from>
                <bpel:literal><b4p:response>
    <b4p:taskMetaData>
        <b4p:nextTaskId></b4p:nextTaskId>
        <b4p:nextTaskURL></b4p:nextTaskURL>
    </b4p:taskMetaData>
     <b4p:status></b4p:status>
    <b4p:errorCode></b4p:errorCode>
    <b4p:errorReason></b4p:errorReason>
    <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
              </bpel:from>
              <bpel:to>$completeTaskResponse.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$claimTaskResponse">
              <bpel:from>
                <bpel:literal>
<b4p:claimTaskResponse>
  <b4p:status></b4p:status>
</b4p:claimTaskResponse></bpel:literal>
              </bpel:from>
              <bpel:to>$claimTaskResponse.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$revokeTaskResponse">
              <bpel:from>
                <bpel:literal>
<b4p:revokeTaskResponse>
  <b4p:status></b4p:status>
</b4p:revokeTaskResponse></bpel:literal>
              </bpel:from>
              <bpel:to>$revokeTaskResponse.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$escalateTaskResponse">
              <bpel:from>
                <bpel:literal>
<b4p:escalateTaskResponse>
  <b4p:status></b4p:status>
</b4p:escalateTaskResponse></bpel:literal>
              </bpel:from>
              <bpel:to>$escalateTaskResponse.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$notifyTaskCompletionRequest">
              <bpel:from>
                <bpel:literal><b4p:notifyTaskCompletionRequest>
    <b4p:taskMetaData>
        <b4p:taskId></b4p:taskId>
        <b4p:taskState></b4p:taskState>
        <b4p:taskType></b4p:taskType>
        <b4p:description></b4p:description>
        <b4p:processId></b4p:processId>
        <b4p:creationDate></b4p:creationDate>
        <b4p:userOwner></b4p:userOwner>
        <b4p:roleOwner></b4p:roleOwner>
        <b4p:claimAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:claimAction>
        <b4p:revokeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:revokeAction>
        <b4p:saveAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:saveAction>
        <b4p:completeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:completeAction>
        <b4p:deferAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:deferAction>
        <b4p:formUrl></b4p:formUrl>
        <b4p:failureCode></b4p:failureCode>
        <b4p:failureReason></b4p:failureReason>
        <b4p:priority></b4p:priority>
        <b4p:scheduledActions>
            <b4p:expiration>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:expiration>
            <b4p:deferActivation>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:deferActivation>
        </b4p:scheduledActions>
        <b4p:userEndpoint></b4p:userEndpoint>
        <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
        <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
        <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
        <b4p:isChainedBefore></b4p:isChainedBefore>
        <b4p:previousTaskId></b4p:previousTaskId>
        <b4p:nextTaskId></b4p:nextTaskId>
        <b4p:session></b4p:session>
        <b4p:nextTaskURL></b4p:nextTaskURL>
        <b4p:attachments>
            <attachment>
                <attachmentMetadata>
                    <mimeType></mimeType>
                    <fileName></fileName>
                    <title></title>
                    <description></description>
                    <creationDate></creationDate>
                </attachmentMetadata>
                <payloadUrl></payloadUrl>
            </attachment>
        </b4p:attachments>
    </b4p:taskMetaData>
    <b4p:taskOutput></b4p:taskOutput>
    <b4p:status></b4p:status>
    <b4p:user></b4p:user>
</b4p:notifyTaskCompletionRequest></bpel:literal>
              </bpel:from>
              <bpel:to>$notifyTaskCompletionRequest.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$tnsGetAttachmentsRequestMsg">
              <bpel:from>
                <bpel:literal><tns:getAttachmentsRequest>
    <tns:taskId></tns:taskId>
    <tns:participantToken></tns:participantToken>
</tns:getAttachmentsRequest></bpel:literal>
              </bpel:from>
              <bpel:to>$tnsGetAttachmentsRequestMsg.getAttachmentsRequest</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$TMSskipRequest">
              <bpel:from>
                <bpel:literal>
<tns:skipRequest>
  <tns:taskId></tns:taskId>
  <tns:participantToken></tns:participantToken>
</tns:skipRequest></bpel:literal>
              </bpel:from>
              <bpel:to>$TMSskipRequest.skipRequest</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$b4pSkipTaskResponseMsg">
              <bpel:from>
                <bpel:literal>
<b4p:response>
  <b4p:taskMetaData>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
  </b4p:taskMetaData>
  <b4p:status></b4p:status>
  <b4p:errorCode></b4p:errorCode>
  <b4p:errorReason></b4p:errorReason>
  <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
              </bpel:from>
              <bpel:to>$b4pSkipTaskResponseMsg.root</bpel:to>
            </bpel:copy>
          </bpel:assign>
          <bpel:pick bpmn:label="Waiting for requests" name="Waiting_for_requests" bpmn:id="_ESlcoKhHEdyQFMjeTyvJzg">
            <bpel:onMessage partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="completeTask" variable="completeTaskRequest" bpmn:label="Receive complete Task Request" name="Receive_complete_Task_Request" bpmn:id="_QcFlEKhHEdyQFMjeTyvJzg">
              <bpel:correlations>
                <bpel:correlation set="task" initiate="no"/>
              </bpel:correlations>
              <bpel:sequence>
                <bpel:assign name="init-variables-SubProcess">
                  <bpel:copy bpmn:label="$tnsReassignRequestMsg">
                    <bpel:from>
                      <bpel:literal>
<tns:reassignRequest>
  <tns:taskId></tns:taskId>
  <tns:userOwner></tns:userOwner>
  <tns:roleOwner></tns:roleOwner>
  <tns:taskState></tns:taskState>
  <tns:participantToken></tns:participantToken>
</tns:reassignRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$tnsReassignRequestMsg.reassignRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$completeTMSTaskRequest">
                    <bpel:from>
                      <bpel:literal>
<tns:setOutputAndCompleteRequest>
  <tns:taskId></tns:taskId>
  <tns:data></tns:data>
  <tns:participantToken></tns:participantToken>
</tns:setOutputAndCompleteRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$completeTMSTaskRequest.setOutputAndCompleteRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$completeTaskResponse">
                    <bpel:from>
                      <bpel:literal><b4p:response>
    <b4p:taskMetaData>
        <b4p:nextTaskId></b4p:nextTaskId>
        <b4p:nextTaskURL></b4p:nextTaskURL>
    </b4p:taskMetaData>
     <b4p:status></b4p:status>
    <b4p:errorCode></b4p:errorCode>
    <b4p:errorReason></b4p:errorReason>
    <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
                    </bpel:from>
                    <bpel:to>$completeTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$claimTaskResponse">
                    <bpel:from>
                      <bpel:literal>
<b4p:claimTaskResponse>
  <b4p:status></b4p:status>
</b4p:claimTaskResponse></bpel:literal>
                    </bpel:from>
                    <bpel:to>$claimTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$revokeTaskResponse">
                    <bpel:from>
                      <bpel:literal>
<b4p:revokeTaskResponse>
  <b4p:status></b4p:status>
</b4p:revokeTaskResponse></bpel:literal>
                    </bpel:from>
                    <bpel:to>$revokeTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$escalateTaskResponse">
                    <bpel:from>
                      <bpel:literal>
<b4p:escalateTaskResponse>
  <b4p:status></b4p:status>
</b4p:escalateTaskResponse></bpel:literal>
                    </bpel:from>
                    <bpel:to>$escalateTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$notifyTaskCompletionRequest">
                    <bpel:from>
                      <bpel:literal><b4p:notifyTaskCompletionRequest>
    <b4p:taskMetaData>
        <b4p:taskId></b4p:taskId>
        <b4p:taskState></b4p:taskState>
        <b4p:taskType></b4p:taskType>
        <b4p:description></b4p:description>
        <b4p:processId></b4p:processId>
        <b4p:creationDate></b4p:creationDate>
        <b4p:userOwner></b4p:userOwner>
        <b4p:roleOwner></b4p:roleOwner>
        <b4p:claimAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:claimAction>
        <b4p:revokeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:revokeAction>
        <b4p:saveAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:saveAction>
        <b4p:completeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:completeAction>
        <b4p:deferAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:deferAction>
        <b4p:formUrl></b4p:formUrl>
        <b4p:failureCode></b4p:failureCode>
        <b4p:failureReason></b4p:failureReason>
        <b4p:priority></b4p:priority>
        <b4p:scheduledActions>
            <b4p:expiration>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:expiration>
            <b4p:deferActivation>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:deferActivation>
        </b4p:scheduledActions>
        <b4p:userEndpoint></b4p:userEndpoint>
        <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
        <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
        <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
        <b4p:isChainedBefore></b4p:isChainedBefore>
        <b4p:previousTaskId></b4p:previousTaskId>
        <b4p:nextTaskId></b4p:nextTaskId>
        <b4p:session></b4p:session>
        <b4p:nextTaskURL></b4p:nextTaskURL>
        <b4p:attachments>
            <attachment>
                <attachmentMetadata>
                    <mimeType></mimeType>
                    <fileName></fileName>
                    <title></title>
                    <description></description>
                    <creationDate></creationDate>
                </attachmentMetadata>
                <payloadUrl></payloadUrl>
            </attachment>
        </b4p:attachments>
    </b4p:taskMetaData>
    <b4p:taskOutput></b4p:taskOutput>
    <b4p:status></b4p:status>
    <b4p:user></b4p:user>
</b4p:notifyTaskCompletionRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$notifyTaskCompletionRequest.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$tnsGetAttachmentsRequestMsg">
                    <bpel:from>
                      <bpel:literal><tns:getAttachmentsRequest>
    <tns:taskId></tns:taskId>
    <tns:participantToken></tns:participantToken>
</tns:getAttachmentsRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$tnsGetAttachmentsRequestMsg.getAttachmentsRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$TMSskipRequest">
                    <bpel:from>
                      <bpel:literal>
<tns:skipRequest>
  <tns:taskId></tns:taskId>
  <tns:participantToken></tns:participantToken>
</tns:skipRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$TMSskipRequest.skipRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$b4pSkipTaskResponseMsg">
                    <bpel:from>
                      <bpel:literal>
<b4p:response>
  <b4p:taskMetaData>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
  </b4p:taskMetaData>
  <b4p:status></b4p:status>
  <b4p:errorCode></b4p:errorCode>
  <b4p:errorReason></b4p:errorReason>
  <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
                    </bpel:from>
                    <bpel:to>$b4pSkipTaskResponseMsg.root</bpel:to>
                  </bpel:copy>
                </bpel:assign>
                <bpel:assign bpmn:label="Invoke TMS to mark Task as completed" name="Invoke_TMS_to_mark_Task_as_completed" bpmn:id="_wSyCIKhNEdyQFMjeTyvJzg">
                  <bpel:copy>
                    <bpel:from>$createTaskResponse.root/b4p:taskMetaData/b4p:taskId</bpel:from>
                    <bpel:to>$completeTMSTaskRequest.setOutputAndCompleteRequest/tns:taskId</bpel:to>
                  </bpel:copy>
                  <bpel:copy>
                    <bpel:from>$completeTaskRequest.root/b4p:taskOutput</bpel:from>
                    <bpel:to>$completeTMSTaskRequest.setOutputAndCompleteRequest/tns:data</bpel:to>
                  </bpel:copy>
                  <bpel:copy>
                    <bpel:from>$completeTaskRequest.root/b4p:participantToken</bpel:from>
                    <bpel:to>$completeTMSTaskRequest.setOutputAndCompleteRequest/tns:participantToken</bpel:to>
                  </bpel:copy>
                </bpel:assign>
                <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServices" operation="setOutputAndComplete" inputVariable="completeTMSTaskRequest" outputVariable="completeTMSTaskResponse" bpmn:label="Invoke TMS to mark Task as completed" name="Invoke_TMS_to_mark_Task_as_completed-1" bpmn:id="_wSyCIKhNEdyQFMjeTyvJzg"></bpel:invoke>
                <bpel:assign bpmn:label="getAttachements" name="getAttachements" bpmn:id="_6-GHIGmhEd2FXpqqOgbHYQ">
                  <bpel:copy>
                    <bpel:from>$completeTaskRequest.root/b4p:participantToken</bpel:from>
                    <bpel:to>$tnsGetAttachmentsRequestMsg.getAttachmentsRequest/tns:participantToken</bpel:to>
                  </bpel:copy>
                  <bpel:copy>
                    <bpel:from>$completeTaskRequest.root/b4p:taskMetaData/b4p:taskId</bpel:from>
                    <bpel:to>$tnsGetAttachmentsRequestMsg.getAttachmentsRequest/tns:taskId</bpel:to>
                  </bpel:copy>
                </bpel:assign>
                <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServices" operation="getAttachments" inputVariable="tnsGetAttachmentsRequestMsg" outputVariable="tnsGetAttachmentsResponseMsg" bpmn:label="getAttachements" name="getAttachements-1" bpmn:id="_6-GHIGmhEd2FXpqqOgbHYQ"></bpel:invoke>
                <bpel:assign bpmn:label="notify Task Completion Request" name="notify_Task_Completion_Request" bpmn:id="_JP7KQKhQEdyQFMjeTyvJzg">
                  <bpel:copy>
                    <bpel:from>$createTaskResponse.root/b4p:taskMetaData/b4p:taskId</bpel:from>
                    <bpel:to>$notifyTaskCompletionRequest.root/b4p:taskMetaData/b4p:taskId</bpel:to>
                  </bpel:copy>
                  <bpel:copy>
                    <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:processId</bpel:from>
                    <bpel:to>$notifyTaskCompletionRequest.root/b4p:taskMetaData/b4p:processId</bpel:to>
                  </bpel:copy>
                  <bpel:copy>
                    <bpel:from>$completeTaskRequest.root/b4p:taskOutput</bpel:from>
                    <bpel:to>$notifyTaskCompletionRequest.root/b4p:taskOutput</bpel:to>
                  </bpel:copy>
                  <bpel:copy>
                    <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessEndpoint</bpel:from>
                    <bpel:to>$notifyTaskCompletionRequest.root/b4p:taskMetaData/b4p:userProcessEndpoint</bpel:to>
                  </bpel:copy>
                  <bpel:copy>
                    <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessNamespaceURI</bpel:from>
                    <bpel:to>$notifyTaskCompletionRequest.root/b4p:taskMetaData/b4p:userProcessNamespaceURI</bpel:to>
                  </bpel:copy>
                  <bpel:copy>
                    <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessCompleteSOAPAction</bpel:from>
                    <bpel:to>$notifyTaskCompletionRequest.root/b4p:taskMetaData/b4p:userProcessCompleteSOAPAction</bpel:to>
                  </bpel:copy>
                  <bpel:copy>
                    <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:session</bpel:from>
                    <bpel:to>$notifyTaskCompletionRequest.root/b4p:taskMetaData/b4p:session</bpel:to>
                  </bpel:copy>
                  <bpel:copy>
                    <bpel:from>"OK"</bpel:from>
                    <bpel:to>$notifyTaskCompletionRequest.root/b4p:status</bpel:to>
                  </bpel:copy>
                  <bpel:copy>
                    <bpel:from>$tnsGetAttachmentsResponseMsg.getAttachmentsResponse</bpel:from>
                    <bpel:to>$notifyTaskCompletionRequest.root/b4p:taskMetaData/b4p:attachments</bpel:to>
                  </bpel:copy>
                  <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
                    <bpel:from>$completeTaskRequest.root/b4p:user</bpel:from>
                    <bpel:to>$notifyTaskCompletionRequest.root/b4p:user</bpel:to>
                  </bpel:copy>
                </bpel:assign>
                <bpel:invoke partnerLink="tMPAndUBPPlkVar" portType="UserBusinessProcess1:userProcessPortType" operation="notifyTaskCompletion" inputVariable="notifyTaskCompletionRequest" outputVariable="notifyTaskCompletionResponse" bpmn:label="notify Task Completion Request" name="notify_Task_Completion_Request-1" bpmn:id="_JP7KQKhQEdyQFMjeTyvJzg"></bpel:invoke>
                <bpel:if>
                  <bpel:condition>$notifyTaskCompletionResponse.root/b4p:isChainedAfter/text() = "true"</bpel:condition>
                  <bpel:sequence>
                    <bpel:receive partnerLink="taskManagementProcessAndNextTaskManagerForTMPPortPlkVar" portType="b4p:TMPPortType" operation="nextTaskReady" variable="b4pNextTaskReadyMsg" bpmn:label="wait for next Task to be created" name="wait_for_next_Task_to_be_created" bpmn:id="_tth9iKhVEdyQFMjeTyvJzg">
                      <bpel:correlations>
                        <bpel:correlation set="task" initiate="no"/>
                      </bpel:correlations>
                    </bpel:receive>
                    <bpel:assign bpmn:label="Prepare response to UIFW" name="Prepare_response_to_UIFW" bpmn:id="_R5Kh4KhZEdyXuZws7kaYiQ">
                      <bpel:copy>
                        <bpel:from>"OK"</bpel:from>
                        <bpel:to>$completeTaskResponse.root/b4p:status</bpel:to>
                      </bpel:copy>
                      <bpel:copy>
                        <bpel:from>$b4pNextTaskReadyMsg.root/b4p:nextTaskId</bpel:from>
                        <bpel:to>$completeTaskResponse.root/b4p:taskMetaData/b4p:nextTaskId</bpel:to>
                      </bpel:copy>
                      <bpel:copy>
                        <bpel:from>$b4pNextTaskReadyMsg.root/b4p:nextTaskURL</bpel:from>
                        <bpel:to>$completeTaskResponse.root/b4p:taskMetaData/b4p:nextTaskURL</bpel:to>
                      </bpel:copy>
                    </bpel:assign>
                  </bpel:sequence>
                </bpel:if>
                <bpel:assign bpmn:label="send  Complete Task&#13;&#10; response back to UI" name="send__Complete_Task___response_back_to_UI" bpmn:id="_yEJboKhZEdyXuZws7kaYiQ">
                  <bpel:copy>
                    <bpel:from>$notifyTaskCompletionResponse.root/b4p:status</bpel:from>
                    <bpel:to>$completeTaskResponse.root/b4p:status</bpel:to>
                  </bpel:copy>
                  <bpel:copy>
                    <bpel:from>if (boolean($notifyTaskCompletionResponse.root/b4p:errorCode)) then ($notifyTaskCompletionResponse.root/b4p:errorCode) else ("")</bpel:from>
                    <bpel:to>$completeTaskResponse.root/b4p:errorCode</bpel:to>
                  </bpel:copy>
                  <bpel:copy>
                    <bpel:from>if (boolean($notifyTaskCompletionResponse.root/b4p:errorReason)) then ($notifyTaskCompletionResponse.root/b4p:errorReason) else ("")</bpel:from>
                    <bpel:to>$completeTaskResponse.root/b4p:errorReason</bpel:to>
                  </bpel:copy>
                </bpel:assign>
                <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="completeTask" variable="completeTaskResponse" bpmn:label="send  Complete Task&#13;&#10; response back to UI" name="send__Complete_Task___response_back_to_UI-1" bpmn:id="_yEJboKhZEdyXuZws7kaYiQ"></bpel:reply>
              </bpel:sequence>
            </bpel:onMessage>
            <bpel:onMessage partnerLink="tMPAndUBPPlkVar" portType="b4p:UserBusinessProcessPortType" operation="escalateTask" variable="escalateTaskRequest" bpmn:label="Receive escalate Task Request" name="Receive_escalate_Task_Request" bpmn:id="_P5U2QKhHEdyQFMjeTyvJzg">
              <bpel:correlations>
                <bpel:correlation set="task" initiate="no"/>
              </bpel:correlations>
              <bpel:sequence>
                <bpel:assign name="init-variables-SubProcess">
                  <bpel:copy bpmn:label="$tnsReassignRequestMsg">
                    <bpel:from>
                      <bpel:literal>
<tns:reassignRequest>
  <tns:taskId></tns:taskId>
  <tns:userOwner></tns:userOwner>
  <tns:roleOwner></tns:roleOwner>
  <tns:taskState></tns:taskState>
  <tns:participantToken></tns:participantToken>
</tns:reassignRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$tnsReassignRequestMsg.reassignRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$completeTMSTaskRequest">
                    <bpel:from>
                      <bpel:literal>
<tns:setOutputAndCompleteRequest>
  <tns:taskId></tns:taskId>
  <tns:data></tns:data>
  <tns:participantToken></tns:participantToken>
</tns:setOutputAndCompleteRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$completeTMSTaskRequest.setOutputAndCompleteRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$completeTaskResponse">
                    <bpel:from>
                      <bpel:literal><b4p:response>
    <b4p:taskMetaData>
        <b4p:nextTaskId></b4p:nextTaskId>
        <b4p:nextTaskURL></b4p:nextTaskURL>
    </b4p:taskMetaData>
     <b4p:status></b4p:status>
    <b4p:errorCode></b4p:errorCode>
    <b4p:errorReason></b4p:errorReason>
    <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
                    </bpel:from>
                    <bpel:to>$completeTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$claimTaskResponse">
                    <bpel:from>
                      <bpel:literal>
<b4p:claimTaskResponse>
  <b4p:status></b4p:status>
</b4p:claimTaskResponse></bpel:literal>
                    </bpel:from>
                    <bpel:to>$claimTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$revokeTaskResponse">
                    <bpel:from>
                      <bpel:literal>
<b4p:revokeTaskResponse>
  <b4p:status></b4p:status>
</b4p:revokeTaskResponse></bpel:literal>
                    </bpel:from>
                    <bpel:to>$revokeTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$escalateTaskResponse">
                    <bpel:from>
                      <bpel:literal>
<b4p:escalateTaskResponse>
  <b4p:status></b4p:status>
</b4p:escalateTaskResponse></bpel:literal>
                    </bpel:from>
                    <bpel:to>$escalateTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$notifyTaskCompletionRequest">
                    <bpel:from>
                      <bpel:literal><b4p:notifyTaskCompletionRequest>
    <b4p:taskMetaData>
        <b4p:taskId></b4p:taskId>
        <b4p:taskState></b4p:taskState>
        <b4p:taskType></b4p:taskType>
        <b4p:description></b4p:description>
        <b4p:processId></b4p:processId>
        <b4p:creationDate></b4p:creationDate>
        <b4p:userOwner></b4p:userOwner>
        <b4p:roleOwner></b4p:roleOwner>
        <b4p:claimAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:claimAction>
        <b4p:revokeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:revokeAction>
        <b4p:saveAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:saveAction>
        <b4p:completeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:completeAction>
        <b4p:deferAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:deferAction>
        <b4p:formUrl></b4p:formUrl>
        <b4p:failureCode></b4p:failureCode>
        <b4p:failureReason></b4p:failureReason>
        <b4p:priority></b4p:priority>
        <b4p:scheduledActions>
            <b4p:expiration>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:expiration>
            <b4p:deferActivation>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:deferActivation>
        </b4p:scheduledActions>
        <b4p:userEndpoint></b4p:userEndpoint>
        <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
        <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
        <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
        <b4p:isChainedBefore></b4p:isChainedBefore>
        <b4p:previousTaskId></b4p:previousTaskId>
        <b4p:nextTaskId></b4p:nextTaskId>
        <b4p:session></b4p:session>
        <b4p:nextTaskURL></b4p:nextTaskURL>
        <b4p:attachments>
            <attachment>
                <attachmentMetadata>
                    <mimeType></mimeType>
                    <fileName></fileName>
                    <title></title>
                    <description></description>
                    <creationDate></creationDate>
                </attachmentMetadata>
                <payloadUrl></payloadUrl>
            </attachment>
        </b4p:attachments>
    </b4p:taskMetaData>
    <b4p:taskOutput></b4p:taskOutput>
    <b4p:status></b4p:status>
    <b4p:user></b4p:user>
</b4p:notifyTaskCompletionRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$notifyTaskCompletionRequest.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$tnsGetAttachmentsRequestMsg">
                    <bpel:from>
                      <bpel:literal><tns:getAttachmentsRequest>
    <tns:taskId></tns:taskId>
    <tns:participantToken></tns:participantToken>
</tns:getAttachmentsRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$tnsGetAttachmentsRequestMsg.getAttachmentsRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$TMSskipRequest">
                    <bpel:from>
                      <bpel:literal>
<tns:skipRequest>
  <tns:taskId></tns:taskId>
  <tns:participantToken></tns:participantToken>
</tns:skipRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$TMSskipRequest.skipRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$b4pSkipTaskResponseMsg">
                    <bpel:from>
                      <bpel:literal>
<b4p:response>
  <b4p:taskMetaData>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
  </b4p:taskMetaData>
  <b4p:status></b4p:status>
  <b4p:errorCode></b4p:errorCode>
  <b4p:errorReason></b4p:errorReason>
  <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
                    </bpel:from>
                    <bpel:to>$b4pSkipTaskResponseMsg.root</bpel:to>
                  </bpel:copy>
                </bpel:assign>
                <bpel:assign bpmn:label="Invoke TMS to reassign Task" name="Invoke_TMS_to_reassign_Task" bpmn:id="_p3IKIKhJEdyQFMjeTyvJzg">
                  <bpel:copy>
                    <bpel:from>"READY"</bpel:from>
                    <bpel:to>$tnsReassignRequestMsg.reassignRequest/tns:taskState</bpel:to>
                  </bpel:copy>
                  <bpel:copy>
                    <bpel:from>$escalateTaskRequest.root/b4p:taskId</bpel:from>
                    <bpel:to>$tnsReassignRequestMsg.reassignRequest/tns:taskId</bpel:to>
                  </bpel:copy>
                  <bpel:copy>
                    <bpel:from>bpel:doXslTransform("userRoleOwner.xsl", $tnsReassignRequestMsg.reassignRequest, "metadata", $escalateTaskRequest.root)</bpel:from>
                    <bpel:to>$tnsReassignRequestMsg.reassignRequest</bpel:to>
                  </bpel:copy>
                </bpel:assign>
                <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServices" operation="reassign" inputVariable="tnsReassignRequestMsg" outputVariable="tnsReassignResponseMsg" bpmn:label="Invoke TMS to reassign Task" name="Invoke_TMS_to_reassign_Task-1" bpmn:id="_p3IKIKhJEdyQFMjeTyvJzg"></bpel:invoke>
                <bpel:assign bpmn:label="Send response back to UBP" name="Send_response_back_to_UBP" bpmn:id="_NRL9EKhMEdyQFMjeTyvJzg">
                  <bpel:copy>
                    <bpel:from>false()</bpel:from>
                    <bpel:to>$taskClaimed</bpel:to>
                  </bpel:copy>
                  <bpel:copy>
                    <bpel:from>"OK"</bpel:from>
                    <bpel:to>$escalateTaskResponse.root/b4p:status</bpel:to>
                  </bpel:copy>
                </bpel:assign>
                <bpel:reply partnerLink="tMPAndUBPPlkVar" portType="b4p:UserBusinessProcessPortType" operation="escalateTask" variable="escalateTaskResponse" bpmn:label="Send response back to UBP" name="Send_response_back_to_UBP-1" bpmn:id="_NRL9EKhMEdyQFMjeTyvJzg"></bpel:reply>
              </bpel:sequence>
            </bpel:onMessage>
            <bpel:onMessage partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="revokeTask" variable="revokeTaskRequest" bpmn:label="Receive Revoke Request" name="Receive_Revoke_Request" bpmn:id="_7pZP0KkjEdyFPr8ebhWveQ">
              <bpel:correlations>
                <bpel:correlation set="task" initiate="no"/>
              </bpel:correlations>
              <bpel:sequence>
                <bpel:assign name="init-variables-SubProcess">
                  <bpel:copy bpmn:label="$tnsReassignRequestMsg">
                    <bpel:from>
                      <bpel:literal>
<tns:reassignRequest>
  <tns:taskId></tns:taskId>
  <tns:userOwner></tns:userOwner>
  <tns:roleOwner></tns:roleOwner>
  <tns:taskState></tns:taskState>
  <tns:participantToken></tns:participantToken>
</tns:reassignRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$tnsReassignRequestMsg.reassignRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$completeTMSTaskRequest">
                    <bpel:from>
                      <bpel:literal>
<tns:setOutputAndCompleteRequest>
  <tns:taskId></tns:taskId>
  <tns:data></tns:data>
  <tns:participantToken></tns:participantToken>
</tns:setOutputAndCompleteRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$completeTMSTaskRequest.setOutputAndCompleteRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$completeTaskResponse">
                    <bpel:from>
                      <bpel:literal><b4p:response>
    <b4p:taskMetaData>
        <b4p:nextTaskId></b4p:nextTaskId>
        <b4p:nextTaskURL></b4p:nextTaskURL>
    </b4p:taskMetaData>
     <b4p:status></b4p:status>
    <b4p:errorCode></b4p:errorCode>
    <b4p:errorReason></b4p:errorReason>
    <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
                    </bpel:from>
                    <bpel:to>$completeTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$claimTaskResponse">
                    <bpel:from>
                      <bpel:literal>
<b4p:claimTaskResponse>
  <b4p:status></b4p:status>
</b4p:claimTaskResponse></bpel:literal>
                    </bpel:from>
                    <bpel:to>$claimTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$revokeTaskResponse">
                    <bpel:from>
                      <bpel:literal>
<b4p:revokeTaskResponse>
  <b4p:status></b4p:status>
</b4p:revokeTaskResponse></bpel:literal>
                    </bpel:from>
                    <bpel:to>$revokeTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$escalateTaskResponse">
                    <bpel:from>
                      <bpel:literal>
<b4p:escalateTaskResponse>
  <b4p:status></b4p:status>
</b4p:escalateTaskResponse></bpel:literal>
                    </bpel:from>
                    <bpel:to>$escalateTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$notifyTaskCompletionRequest">
                    <bpel:from>
                      <bpel:literal><b4p:notifyTaskCompletionRequest>
    <b4p:taskMetaData>
        <b4p:taskId></b4p:taskId>
        <b4p:taskState></b4p:taskState>
        <b4p:taskType></b4p:taskType>
        <b4p:description></b4p:description>
        <b4p:processId></b4p:processId>
        <b4p:creationDate></b4p:creationDate>
        <b4p:userOwner></b4p:userOwner>
        <b4p:roleOwner></b4p:roleOwner>
        <b4p:claimAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:claimAction>
        <b4p:revokeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:revokeAction>
        <b4p:saveAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:saveAction>
        <b4p:completeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:completeAction>
        <b4p:deferAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:deferAction>
        <b4p:formUrl></b4p:formUrl>
        <b4p:failureCode></b4p:failureCode>
        <b4p:failureReason></b4p:failureReason>
        <b4p:priority></b4p:priority>
        <b4p:scheduledActions>
            <b4p:expiration>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:expiration>
            <b4p:deferActivation>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:deferActivation>
        </b4p:scheduledActions>
        <b4p:userEndpoint></b4p:userEndpoint>
        <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
        <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
        <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
        <b4p:isChainedBefore></b4p:isChainedBefore>
        <b4p:previousTaskId></b4p:previousTaskId>
        <b4p:nextTaskId></b4p:nextTaskId>
        <b4p:session></b4p:session>
        <b4p:nextTaskURL></b4p:nextTaskURL>
        <b4p:attachments>
            <attachment>
                <attachmentMetadata>
                    <mimeType></mimeType>
                    <fileName></fileName>
                    <title></title>
                    <description></description>
                    <creationDate></creationDate>
                </attachmentMetadata>
                <payloadUrl></payloadUrl>
            </attachment>
        </b4p:attachments>
    </b4p:taskMetaData>
    <b4p:taskOutput></b4p:taskOutput>
    <b4p:status></b4p:status>
    <b4p:user></b4p:user>
</b4p:notifyTaskCompletionRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$notifyTaskCompletionRequest.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$tnsGetAttachmentsRequestMsg">
                    <bpel:from>
                      <bpel:literal><tns:getAttachmentsRequest>
    <tns:taskId></tns:taskId>
    <tns:participantToken></tns:participantToken>
</tns:getAttachmentsRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$tnsGetAttachmentsRequestMsg.getAttachmentsRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$TMSskipRequest">
                    <bpel:from>
                      <bpel:literal>
<tns:skipRequest>
  <tns:taskId></tns:taskId>
  <tns:participantToken></tns:participantToken>
</tns:skipRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$TMSskipRequest.skipRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$b4pSkipTaskResponseMsg">
                    <bpel:from>
                      <bpel:literal>
<b4p:response>
  <b4p:taskMetaData>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
  </b4p:taskMetaData>
  <b4p:status></b4p:status>
  <b4p:errorCode></b4p:errorCode>
  <b4p:errorReason></b4p:errorReason>
  <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
                    </bpel:from>
                    <bpel:to>$b4pSkipTaskResponseMsg.root</bpel:to>
                  </bpel:copy>
                </bpel:assign>
                <bpel:if>
                  <bpel:condition>$taskClaimed</bpel:condition>
                  <bpel:sequence>
                    <bpel:assign bpmn:label="reassign revoked task" name="reassign_revoked_task" bpmn:id="_TtOm0KklEdyFPr8ebhWveQ">
                      <bpel:copy>
                        <bpel:from>"READY"</bpel:from>
                        <bpel:to>$tnsReassignRequestMsg.reassignRequest/tns:taskState</bpel:to>
                      </bpel:copy>
                      <bpel:copy>
                        <bpel:from>$revokeTaskRequest.root/b4p:taskId</bpel:from>
                        <bpel:to>$tnsReassignRequestMsg.reassignRequest/tns:taskId</bpel:to>
                      </bpel:copy>
                      <bpel:copy>
                        <bpel:from>$revokeTaskRequest.root/b4p:participantToken</bpel:from>
                        <bpel:to>$tnsReassignRequestMsg.reassignRequest/tns:participantToken</bpel:to>
                      </bpel:copy>
                      <bpel:copy>
                        <bpel:from>bpel:doXslTransform("userRoleOwner.xsl", $tnsReassignRequestMsg.reassignRequest, "metadata", $initialOwners)</bpel:from>
                        <bpel:to>$tnsReassignRequestMsg.reassignRequest</bpel:to>
                      </bpel:copy>
                    </bpel:assign>
                    <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServices" operation="reassign" inputVariable="tnsReassignRequestMsg" outputVariable="tnsReassignResponseMsg" bpmn:label="reassign revoked task" name="reassign_revoked_task-1" bpmn:id="_TtOm0KklEdyFPr8ebhWveQ"></bpel:invoke>
                  </bpel:sequence>
                </bpel:if>
                <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="revokeTask" variable="revokeTaskResponse" bpmn:label="send revoke Task &#13;&#10;response to UIFW" name="send_revoke_Task___response_to_UIFW" bpmn:id="_FpfJ0KkmEdyFPr8ebhWveQ"></bpel:reply>
              </bpel:sequence>
            </bpel:onMessage>
            <bpel:onMessage partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="claimTask" variable="claimTaskRequest" bpmn:label="Receive Claim request" name="Receive_Claim_request" bpmn:id="_WYkDIKkOEdyRnIK1kDiFhA">
              <bpel:correlations>
                <bpel:correlation set="task" initiate="no"/>
              </bpel:correlations>
              <bpel:sequence>
                <bpel:assign name="init-variables-SubProcess">
                  <bpel:copy bpmn:label="$tnsReassignRequestMsg">
                    <bpel:from>
                      <bpel:literal>
<tns:reassignRequest>
  <tns:taskId></tns:taskId>
  <tns:userOwner></tns:userOwner>
  <tns:roleOwner></tns:roleOwner>
  <tns:taskState></tns:taskState>
  <tns:participantToken></tns:participantToken>
</tns:reassignRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$tnsReassignRequestMsg.reassignRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$completeTMSTaskRequest">
                    <bpel:from>
                      <bpel:literal>
<tns:setOutputAndCompleteRequest>
  <tns:taskId></tns:taskId>
  <tns:data></tns:data>
  <tns:participantToken></tns:participantToken>
</tns:setOutputAndCompleteRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$completeTMSTaskRequest.setOutputAndCompleteRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$completeTaskResponse">
                    <bpel:from>
                      <bpel:literal><b4p:response>
    <b4p:taskMetaData>
        <b4p:nextTaskId></b4p:nextTaskId>
        <b4p:nextTaskURL></b4p:nextTaskURL>
    </b4p:taskMetaData>
     <b4p:status></b4p:status>
    <b4p:errorCode></b4p:errorCode>
    <b4p:errorReason></b4p:errorReason>
    <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
                    </bpel:from>
                    <bpel:to>$completeTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$claimTaskResponse">
                    <bpel:from>
                      <bpel:literal>
<b4p:claimTaskResponse>
  <b4p:status></b4p:status>
</b4p:claimTaskResponse></bpel:literal>
                    </bpel:from>
                    <bpel:to>$claimTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$revokeTaskResponse">
                    <bpel:from>
                      <bpel:literal>
<b4p:revokeTaskResponse>
  <b4p:status></b4p:status>
</b4p:revokeTaskResponse></bpel:literal>
                    </bpel:from>
                    <bpel:to>$revokeTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$escalateTaskResponse">
                    <bpel:from>
                      <bpel:literal>
<b4p:escalateTaskResponse>
  <b4p:status></b4p:status>
</b4p:escalateTaskResponse></bpel:literal>
                    </bpel:from>
                    <bpel:to>$escalateTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$notifyTaskCompletionRequest">
                    <bpel:from>
                      <bpel:literal><b4p:notifyTaskCompletionRequest>
    <b4p:taskMetaData>
        <b4p:taskId></b4p:taskId>
        <b4p:taskState></b4p:taskState>
        <b4p:taskType></b4p:taskType>
        <b4p:description></b4p:description>
        <b4p:processId></b4p:processId>
        <b4p:creationDate></b4p:creationDate>
        <b4p:userOwner></b4p:userOwner>
        <b4p:roleOwner></b4p:roleOwner>
        <b4p:claimAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:claimAction>
        <b4p:revokeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:revokeAction>
        <b4p:saveAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:saveAction>
        <b4p:completeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:completeAction>
        <b4p:deferAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:deferAction>
        <b4p:formUrl></b4p:formUrl>
        <b4p:failureCode></b4p:failureCode>
        <b4p:failureReason></b4p:failureReason>
        <b4p:priority></b4p:priority>
        <b4p:scheduledActions>
            <b4p:expiration>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:expiration>
            <b4p:deferActivation>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:deferActivation>
        </b4p:scheduledActions>
        <b4p:userEndpoint></b4p:userEndpoint>
        <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
        <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
        <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
        <b4p:isChainedBefore></b4p:isChainedBefore>
        <b4p:previousTaskId></b4p:previousTaskId>
        <b4p:nextTaskId></b4p:nextTaskId>
        <b4p:session></b4p:session>
        <b4p:nextTaskURL></b4p:nextTaskURL>
        <b4p:attachments>
            <attachment>
                <attachmentMetadata>
                    <mimeType></mimeType>
                    <fileName></fileName>
                    <title></title>
                    <description></description>
                    <creationDate></creationDate>
                </attachmentMetadata>
                <payloadUrl></payloadUrl>
            </attachment>
        </b4p:attachments>
    </b4p:taskMetaData>
    <b4p:taskOutput></b4p:taskOutput>
    <b4p:status></b4p:status>
    <b4p:user></b4p:user>
</b4p:notifyTaskCompletionRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$notifyTaskCompletionRequest.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$tnsGetAttachmentsRequestMsg">
                    <bpel:from>
                      <bpel:literal><tns:getAttachmentsRequest>
    <tns:taskId></tns:taskId>
    <tns:participantToken></tns:participantToken>
</tns:getAttachmentsRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$tnsGetAttachmentsRequestMsg.getAttachmentsRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$TMSskipRequest">
                    <bpel:from>
                      <bpel:literal>
<tns:skipRequest>
  <tns:taskId></tns:taskId>
  <tns:participantToken></tns:participantToken>
</tns:skipRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$TMSskipRequest.skipRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$b4pSkipTaskResponseMsg">
                    <bpel:from>
                      <bpel:literal>
<b4p:response>
  <b4p:taskMetaData>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
  </b4p:taskMetaData>
  <b4p:status></b4p:status>
  <b4p:errorCode></b4p:errorCode>
  <b4p:errorReason></b4p:errorReason>
  <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
                    </bpel:from>
                    <bpel:to>$b4pSkipTaskResponseMsg.root</bpel:to>
                  </bpel:copy>
                </bpel:assign>
                <bpel:if>
                  <bpel:condition>$taskClaimed</bpel:condition>
                  <bpel:empty/>
                  <bpel:else>
                    <bpel:sequence>
                      <bpel:if>
                        <bpel:condition>$taskEscalated</bpel:condition>
                        <bpel:sequence>
                          <bpel:assign bpmn:label="save previous owners from escalation request " name="save_previous_owners_from_escalation_request" bpmn:id="_wb66gKkSEdyRnIK1kDiFhA">
                            <bpel:copy>
                              <bpel:from>bpel:doXslTransform("userRoleOwner.xsl", $initialOwners, "metadata", $escalateTaskRequest.root)</bpel:from>
                              <bpel:to>$initialOwners</bpel:to>
                            </bpel:copy>
                          </bpel:assign>
                        </bpel:sequence>
                        <bpel:else>
                          <bpel:sequence>
                            <bpel:assign bpmn:label="save previous owners from creation request" name="save_previous_owners_from_creation_request" bpmn:id="_ChVnwKkTEdyRnIK1kDiFhA">
                              <bpel:copy>
                                <bpel:from>bpel:doXslTransform("userRoleOwner.xsl", $initialOwners, "metadata", $createTaskRequest.root/b4p:taskMetaData)</bpel:from>
                                <bpel:to>$initialOwners</bpel:to>
                              </bpel:copy>
                            </bpel:assign>
                          </bpel:sequence>
                        </bpel:else>
                      </bpel:if>
                      <bpel:assign bpmn:label="Invoke TMS to reassign claimed Task" name="Invoke_TMS_to_reassign_claimed_Task" bpmn:id="_D1muMKkiEdyFPr8ebhWveQ">
                        <bpel:copy>
                          <bpel:from>$claimTaskRequest.root/b4p:participantToken</bpel:from>
                          <bpel:to>$tnsReassignRequestMsg.reassignRequest/tns:participantToken</bpel:to>
                        </bpel:copy>
                        <bpel:copy>
                          <bpel:from>$claimTaskRequest.root/b4p:claimerUser</bpel:from>
                          <bpel:to>$tnsReassignRequestMsg.reassignRequest/tns:userOwner</bpel:to>
                        </bpel:copy>
                        <bpel:copy>
                          <bpel:from>$claimTaskRequest.root/b4p:taskId</bpel:from>
                          <bpel:to>$tnsReassignRequestMsg.reassignRequest/tns:taskId</bpel:to>
                        </bpel:copy>
                        <bpel:copy>
                          <bpel:from>"CLAIMED"</bpel:from>
                          <bpel:to>$tnsReassignRequestMsg.reassignRequest/tns:taskState</bpel:to>
                        </bpel:copy>
                      </bpel:assign>
                      <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServices" operation="reassign" inputVariable="tnsReassignRequestMsg" outputVariable="tnsReassignResponseMsg" bpmn:label="Invoke TMS to reassign claimed Task" name="Invoke_TMS_to_reassign_claimed_Task-1" bpmn:id="_D1muMKkiEdyFPr8ebhWveQ"></bpel:invoke>
                    </bpel:sequence>
                  </bpel:else>
                </bpel:if>
                <bpel:assign bpmn:label="send claim Task &#13;&#10;response to UIFW" name="send_claim_Task___response_to_UIFW" bpmn:id="_Vv8-cKkjEdyFPr8ebhWveQ">
                  <bpel:copy>
                    <bpel:from>true()</bpel:from>
                    <bpel:to>$taskClaimed</bpel:to>
                  </bpel:copy>
                </bpel:assign>
                <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="claimTask" variable="claimTaskResponse" bpmn:label="send claim Task &#13;&#10;response to UIFW" name="send_claim_Task___response_to_UIFW-1" bpmn:id="_Vv8-cKkjEdyFPr8ebhWveQ"></bpel:reply>
              </bpel:sequence>
            </bpel:onMessage>
            <bpel:onMessage partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="skipTask" variable="b4pSkipTaskRequestMsg" bpmn:label="Receive Skip Task  Request" name="Receive_Skip_Task__Request" bpmn:id="_4bvxgHB4Ed2pTYDSDTVx7Q">
              <bpel:correlations>
                <bpel:correlation set="task" initiate="no"/>
              </bpel:correlations>
              <bpel:sequence>
                <bpel:assign name="init-variables-SubProcess">
                  <bpel:copy bpmn:label="$tnsReassignRequestMsg">
                    <bpel:from>
                      <bpel:literal>
<tns:reassignRequest>
  <tns:taskId></tns:taskId>
  <tns:userOwner></tns:userOwner>
  <tns:roleOwner></tns:roleOwner>
  <tns:taskState></tns:taskState>
  <tns:participantToken></tns:participantToken>
</tns:reassignRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$tnsReassignRequestMsg.reassignRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$completeTMSTaskRequest">
                    <bpel:from>
                      <bpel:literal>
<tns:setOutputAndCompleteRequest>
  <tns:taskId></tns:taskId>
  <tns:data></tns:data>
  <tns:participantToken></tns:participantToken>
</tns:setOutputAndCompleteRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$completeTMSTaskRequest.setOutputAndCompleteRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$completeTaskResponse">
                    <bpel:from>
                      <bpel:literal><b4p:response>
    <b4p:taskMetaData>
        <b4p:nextTaskId></b4p:nextTaskId>
        <b4p:nextTaskURL></b4p:nextTaskURL>
    </b4p:taskMetaData>
     <b4p:status></b4p:status>
    <b4p:errorCode></b4p:errorCode>
    <b4p:errorReason></b4p:errorReason>
    <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
                    </bpel:from>
                    <bpel:to>$completeTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$claimTaskResponse">
                    <bpel:from>
                      <bpel:literal>
<b4p:claimTaskResponse>
  <b4p:status></b4p:status>
</b4p:claimTaskResponse></bpel:literal>
                    </bpel:from>
                    <bpel:to>$claimTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$revokeTaskResponse">
                    <bpel:from>
                      <bpel:literal>
<b4p:revokeTaskResponse>
  <b4p:status></b4p:status>
</b4p:revokeTaskResponse></bpel:literal>
                    </bpel:from>
                    <bpel:to>$revokeTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$escalateTaskResponse">
                    <bpel:from>
                      <bpel:literal>
<b4p:escalateTaskResponse>
  <b4p:status></b4p:status>
</b4p:escalateTaskResponse></bpel:literal>
                    </bpel:from>
                    <bpel:to>$escalateTaskResponse.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$notifyTaskCompletionRequest">
                    <bpel:from>
                      <bpel:literal><b4p:notifyTaskCompletionRequest>
    <b4p:taskMetaData>
        <b4p:taskId></b4p:taskId>
        <b4p:taskState></b4p:taskState>
        <b4p:taskType></b4p:taskType>
        <b4p:description></b4p:description>
        <b4p:processId></b4p:processId>
        <b4p:creationDate></b4p:creationDate>
        <b4p:userOwner></b4p:userOwner>
        <b4p:roleOwner></b4p:roleOwner>
        <b4p:claimAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:claimAction>
        <b4p:revokeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:revokeAction>
        <b4p:saveAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:saveAction>
        <b4p:completeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:completeAction>
        <b4p:deferAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:deferAction>
        <b4p:formUrl></b4p:formUrl>
        <b4p:failureCode></b4p:failureCode>
        <b4p:failureReason></b4p:failureReason>
        <b4p:priority></b4p:priority>
        <b4p:scheduledActions>
            <b4p:expiration>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:expiration>
            <b4p:deferActivation>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:deferActivation>
        </b4p:scheduledActions>
        <b4p:userEndpoint></b4p:userEndpoint>
        <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
        <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
        <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
        <b4p:isChainedBefore></b4p:isChainedBefore>
        <b4p:previousTaskId></b4p:previousTaskId>
        <b4p:nextTaskId></b4p:nextTaskId>
        <b4p:session></b4p:session>
        <b4p:nextTaskURL></b4p:nextTaskURL>
        <b4p:attachments>
            <attachment>
                <attachmentMetadata>
                    <mimeType></mimeType>
                    <fileName></fileName>
                    <title></title>
                    <description></description>
                    <creationDate></creationDate>
                </attachmentMetadata>
                <payloadUrl></payloadUrl>
            </attachment>
        </b4p:attachments>
    </b4p:taskMetaData>
    <b4p:taskOutput></b4p:taskOutput>
    <b4p:status></b4p:status>
    <b4p:user></b4p:user>
</b4p:notifyTaskCompletionRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$notifyTaskCompletionRequest.root</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$tnsGetAttachmentsRequestMsg">
                    <bpel:from>
                      <bpel:literal><tns:getAttachmentsRequest>
    <tns:taskId></tns:taskId>
    <tns:participantToken></tns:participantToken>
</tns:getAttachmentsRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$tnsGetAttachmentsRequestMsg.getAttachmentsRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$TMSskipRequest">
                    <bpel:from>
                      <bpel:literal>
<tns:skipRequest>
  <tns:taskId></tns:taskId>
  <tns:participantToken></tns:participantToken>
</tns:skipRequest></bpel:literal>
                    </bpel:from>
                    <bpel:to>$TMSskipRequest.skipRequest</bpel:to>
                  </bpel:copy>
                  <bpel:copy bpmn:label="$b4pSkipTaskResponseMsg">
                    <bpel:from>
                      <bpel:literal>
<b4p:response>
  <b4p:taskMetaData>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
  </b4p:taskMetaData>
  <b4p:status></b4p:status>
  <b4p:errorCode></b4p:errorCode>
  <b4p:errorReason></b4p:errorReason>
  <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
                    </bpel:from>
                    <bpel:to>$b4pSkipTaskResponseMsg.root</bpel:to>
                  </bpel:copy>
                </bpel:assign>
                <bpel:assign bpmn:label="Invoke TMS to skip Task" name="Invoke_TMS_to_skip_Task" bpmn:id="_H8BBcHB5Ed2pTYDSDTVx7Q">
                  <bpel:copy>
                    <bpel:from>$b4pSkipTaskRequestMsg.root/b4p:taskId</bpel:from>
                    <bpel:to>$TMSskipRequest.skipRequest/tns:taskId</bpel:to>
                  </bpel:copy>
                  <bpel:copy>
                    <bpel:from>$b4pSkipTaskRequestMsg.root/b4p:participantToken</bpel:from>
                    <bpel:to>$TMSskipRequest.skipRequest/tns:participantToken</bpel:to>
                  </bpel:copy>
                </bpel:assign>
                <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServices" operation="skip" inputVariable="TMSskipRequest" outputVariable="TMSskipResponse" bpmn:label="Invoke TMS to skip Task" name="Invoke_TMS_to_skip_Task-1" bpmn:id="_H8BBcHB5Ed2pTYDSDTVx7Q"></bpel:invoke>
                <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="skipTask" variable="b4pSkipTaskResponseMsg" bpmn:label="Message_Intermediate_Event" name="Message_Intermediate_Event" bpmn:id="_M8ajwHB6Ed2pTYDSDTVx7Q"></bpel:reply>
              </bpel:sequence>
            </bpel:onMessage>
          </bpel:pick>
        </bpel:sequence>
      </bpel:while>
    </bpel:scope>
  </bpel:sequence>
</bpel:process>